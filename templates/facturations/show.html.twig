{% extends 'base.html.twig' %}


{% set factureNbr=facturation.id ~ facturation.createdAd|date('mdy') %}

{% block title %}Facture N°{{ factureNbr}} {% endblock %}



    {% block stylesheets %}
        {{ parent() }}
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <style>
            /*body{*/
            /*    margin-top:10px;*/
            /*    background:#eee;*/
            /*}*/

            body {
                margin-top: 20px;
                background: #eee;
            }

            .invoice {
                background: #fff;
                padding: 20px
            }

            .invoice-company {
                font-size: 20px
            }

            .invoice-header {
                margin: 0 -20px;
                background: #f0f3f4;
                padding: 20px
            }

            .invoice-date,
            .invoice-from,
            .invoice-to {
                display: table-cell;
                width: 1%
            }

            .invoice-from,
            .invoice-to {
                padding-right: 20px
            }

            .invoice-date .date,
            .invoice-from strong,
            .invoice-to strong {
                font-size: 16px;
                font-weight: 600
            }

            .invoice-date {
                text-align: right;
                padding-left: 20px
            }

            .invoice-price {
                background: #f0f3f4;
                display: table;
                width: 100%
            }

            .invoice-price .invoice-price-left,
            .invoice-price .invoice-price-right {
                display: table-cell;
                padding: 20px;
                font-size: 20px;
                font-weight: 600;
                width: 75%;
                position: relative;
                vertical-align: middle
            }

            .invoice-price .invoice-price-left .sub-price {
                display: table-cell;
                vertical-align: middle;
                padding: 0 20px
            }

            .invoice-price small {
                font-size: 12px;
                font-weight: 400;
                display: block
            }

            .invoice-price .invoice-price-row {
                display: table;
                float: left
            }

            .invoice-price .invoice-price-right {
                width: 25%;
                background: #2d353c;
                color: #fff;
                font-size: 28px;
                text-align: right;
                vertical-align: bottom;
                font-weight: 300
            }

            .invoice-price .invoice-price-right small {
                display: block;
                opacity: .6;
                position: absolute;
                top: 10px;
                left: 10px;
                font-size: 12px
            }

            .invoice-footer {
                border-top: 1px solid #ddd;
                padding-top: 10px;
                font-size: 10px
            }

            .invoice-note {
                color: #999;
                margin-top: 80px;
                font-size: 85%
            }

            .invoice > div:not(.invoice-footer) {
                margin-bottom: 20px
            }

            .btn.btn-white, .btn.btn-white.disabled, .btn.btn-white.disabled:focus, .btn.btn-white.disabled:hover, .btn.btn-white[disabled], .btn.btn-white[disabled]:focus, .btn.btn-white[disabled]:hover {
                color: #2d353c;
                background: #fff;
                border-color: #d9dfe3;
            }
        </style>

    {% endblock %}
{% block contenu %}
    {% set total=0 %}
    {% set number =0 %}
    {% set difference = date(facturation.booking.checkInAt).diff(date(facturation.booking.checkOutAt)) %}

    <div class="row">
        {# <div class="col-md-12"> #}
        {# <div class="callout callout-info"> #}
        {# <h2 class="page-header"> #}
        {# <img src="" #}
        {# alt=""> #}

        {# </h2> #}

        {# </div> #}
        {# </div> #}

        <div class="col-md-3 col-sm-12">
            <div class="card">
                <div class="card-header"><strong>INFORMATIONS</strong></div>
                <div class="card-header">Numéro <span class="float-right"
                                                      style="text-align: right; color: green">{{ factureNbr}} </span></div>
                <div class="card-header">Client<span class="float-right"
                                                     style="text-align: right; color:green">{{ facturation.booking.clients[0].nom }}</span>
                </div>
                <div class="card-header">Prix Journalier <span class="float-right "
                                                               style="text-align: right; color:green"> {{ facturation.booking.appartement.price }}$ /J</span></div>

                <div class="card-header">Nombre de jours <span class="float-right "
                                                               style="text-align: right; color:green"> {{ difference.days }}/J</span></div>
                <div class="card-header">Montant <span class="float-right "
                                                       style="text-align: right; color:green"> {{ TotalPrix }} $</span></div>
                <div class="card-header">Montant(Taxe) <span class="float-right montant"
                                                       style="text-align: right; color:green"> </span></div>
                <div class="card-header">Date<span class="float-right"
                                                   style="text-align: right; color: green">{{ facturation.paymentAt|date('d M Y') }}</span>
                </div>

                <div class="card-footer">

                </div>


            </div>
            <div class="callout callout-info">
                <h5>Etat du reglèment:</h5>
                <div class="progress">
                    {% if (facturation.paymentAt <= date()) %}
                    <div class="progress-bar bg-success" role="progressbar"
                         style="width: 100%;" aria-valuenow="25"
                         aria-valuemin="0" aria-valuemax="100">100%
                    </div>
                    {% else %}
                        <div class="progress-bar bg-info" role="progressbar"
                             style="width: 100%;" aria-valuenow="25"
                             aria-valuemin="0" aria-valuemax="100">Payement en attente%
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="callout callout-info">
                <h5>Délai du payment:</h5>
                <div class="progress">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 25%;" aria-valuenow="25"
                         aria-valuemin="0" aria-valuemax="100">25%
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-sm-12">

            {{ include('facturations/__pdfInvoice.html.twig') }}


            <!-- /.row -->


        </div>
        <div class="col-md-3 col-sm-12">

            <div class="card">
                <div class="card-header"><strong>ACTIONS</strong></div>
                <div class="card-header"><a href="{{ path('print_invoice', {'id': facturation.id}) }}"  target="_blank">Télecharger <i class="fa fa-download float-right"
                                                                                   style="text-align: right; color: #0b93d5"></i></a>
                </div>
                <div class="card-header"><a href="">Envoyer <i class="fa fa-envelope float-right"
                                                               style="text-align: right; color: #0b93d5"></i></a></div>
                <div class="card-header"><a href="{{ path('facturations_edit', {'id': facturation.id}) }}">Editer <i class="fa fa-edit float-right"
                                                              style="text-align: right;color: #00A000"></i></a></div>
{#                <div class="card-header"><a href="">Convertir en Facture <i class="fa fa-list float-right"#}
{#                                                                            style="text-align: right; color: #0b93d5"></i></a>#}
{#                </div>#}
{#                <div class="card-header"><a href="" onclick="return confirm('Êtes-vous sûr de bien vouloir supprimer cet élément??');"></a></div>#}

{#                        <div class="card-footer">#}

{#                        </div>#}
{#                </div>#}
            </div>

        </div>


    </div>



{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>

        let amount = $(".amount").text()

console.log(amount)
        $(window).on('load', function () {
            $(".montant").html(amount);


        });
    </script>

{% endblock %}
